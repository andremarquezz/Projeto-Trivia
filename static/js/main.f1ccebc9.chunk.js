(this["webpackJsonptrivia-react-redux"]=this["webpackJsonptrivia-react-redux"]||[]).push([[0],{21:function(e,t,n){e.exports=n.p+"static/media/trivia.466d153e.png"},31:function(e,t,n){e.exports=n.p+"static/media/settings.9272e1c5.png"},32:function(e,t,n){e.exports=n.p+"static/media/audio_background_game.5a597645.mp3"},34:function(e,t){},36:function(e,t,n){e.exports=n(59)},46:function(e,t){},47:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(19),o=n.n(c),s=n(3),i=n(14),u=n(2),l=n(13),m=n.n(l),p=n(18),d=n(22),b=n(20),f=n(12),h=n(8),v=n(9),g=n(11),y=n(10),E=n(29),k=n.n(E),O=(n(47),n(21)),S=n.n(O),j=function(e){Object(g.a)(n,e);var t=Object(y.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={user:{email:"",name:""},isEnterButtonDisabled:!0},e.validateEmail=function(e){return/\S+@\S+\.\S+/.test(e)},e.validateUserInfo=function(){var t=e.state.user,n=t.email,a=t.name,r=[!e.validateEmail(n),a.length<3].every((function(e){return!1===e}));e.setState({isEnterButtonDisabled:!r})},e.onInputChange=function(t){var n=t.target,a=n.name,r=n.value;e.setState((function(e){var t=e.user;return{user:Object(f.a)(Object(f.a)({},t),{},Object(b.a)({},a,r))}}),(function(){e.validateUserInfo()}))},e.fetchGravatar=function(){var t=e.state.user,n=t.email,a=t.name,r=k()(n).toString(),c="https://www.gravatar.com/avatar/".concat(r),o=JSON.parse(localStorage.getItem("ranking"))||[],s=JSON.stringify([{name:a,score:0,picture:c}].concat(Object(d.a)(o)));localStorage.setItem("ranking",s)},e.setPlayerToken=Object(p.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://opentdb.com/api_token.php?command=request",e.next=3,fetch("https://opentdb.com/api_token.php?command=request");case 3:return e.next=5,e.sent.json();case 5:t=e.sent,n=t.token,localStorage.setItem("token",n);case 8:case"end":return e.stop()}}),e)}))),e.handlePlayButton=Object(p.a)(m.a.mark((function t(){var n,a,r,c;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state.user,a=e.props,r=a.dispatchUser,c=a.history,t.next=4,e.setPlayerToken();case 4:e.fetchGravatar(),r(n),c.push("/game");case 7:case"end":return t.stop()}}),t)}))),e}return Object(v.a)(n,[{key:"render",value:function(){var e=this.state,t=e.user,n=e.isEnterButtonDisabled,a=t.email,c=t.name;return r.a.createElement("div",{className:"container"},r.a.createElement("img",{alt:"logoGameTrivia",src:S.a,className:"loginLogoTrivia"}),r.a.createElement("section",{className:"container "},r.a.createElement("input",{"data-testid":"input-gravatar-email",type:"email",name:"email",value:a,onChange:this.onInputChange,placeholder:"Digite seu E-mail",className:"form-control"}),r.a.createElement("input",{"data-testid":"input-player-name",type:"text",name:"name",value:c,onChange:this.onInputChange,placeholder:"Digite seu nome",className:"form-control"})),r.a.createElement("div",{className:"button-login enabled"},r.a.createElement("button",{"data-testid":"btn-play",type:"button",disabled:n,onClick:this.handlePlayButton,className:"btn btn-primary"},"Play"),r.a.createElement(i.b,{to:"/settings"},r.a.createElement("button",{"data-testid":"btn-settings",type:"button",className:"btn btn-secondary"},"Settings"))))}}]),n}(a.Component),N=Object(s.b)(null,(function(e){return{dispatchUser:function(t){return e({type:"SET_PLAYER",userInfo:t})}}}))(j),w=n(31),x=n.n(w),T=(n(53),function(e){Object(g.a)(n,e);var t=Object(y.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(v.a)(n,[{key:"render",value:function(){var e=this.props.score,t=JSON.parse(localStorage.getItem("ranking"))[0];return r.a.createElement("header",null,r.a.createElement("div",{className:"center-header"},r.a.createElement("img",{src:t.picture,alt:"imageGravatar","data-testid":"header-profile-picture",className:"userImage"}),r.a.createElement("img",{alt:"logoGameTrivia",src:S.a,className:"logoTrivia"}),r.a.createElement(i.b,{to:"/settings"},r.a.createElement("img",{className:"settings",src:x.a,alt:"logoSettings"}))),r.a.createElement("div",{className:"userInfo"},r.a.createElement("h2",{"data-testid":"header-player-name"},t.name),r.a.createElement("span",{"data-testid":"header-score"},"".concat(e," Pontos"))))}}]),n}(a.Component)),I=Object(s.b)((function(e){return{score:e.player.score}}))(T),C=(n(54),n(32)),A=n.n(C),Q=n(23),_=n.n(Q),D=function(e){Object(g.a)(n,e);var t=Object(y.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={results:[],currentQuestion:{},counter:0,answers:[],assertions:0,btnNextQuestion:!1,colorQuestions:!1,timer:30,btnDisabled:!1,enableTimer:!0,score:0},e.backgroundAudio=function(e){var t=new Audio(A.a);t.volume=.2,t.loop=!0,"play"===e&&t.play()},e.intervalTimer=function(){e.timer=setInterval((function(){e.setState((function(e){return{timer:e.timer-1}}))}),1e3)},e.validateToken=function(t){var n=t.response_code,a=t.results,r=e.props.history;3===n?(localStorage.removeItem("token"),r.push("/")):e.setState({results:a},(function(){return e.currentQuestion()}))},e.handleAnswer=function(){var t=e.state.currentQuestion,n=t.correct_answer,a=t.incorrect_answers,r=[].concat(Object(d.a)(a),[n]).sort((function(){return Math.random()-.5}));e.setState({answers:r})},e.currentQuestion=function(){var t=e.state,n=t.counter,a=t.results;e.setState({currentQuestion:a[n],btnNextQuestion:!1,colorQuestions:!1,btnDisabled:!1,enableTimer:!0,timer:30},(function(){return e.handleAnswer()}))},e.verifyAnswer=function(t){var n=t.target.innerHTML,a=e.state,r=a.currentQuestion,c=a.timer,o=r.correct_answer,s=r.difficulty;clearInterval(e.timer);var i=n===o&&e.setState((function(t){return{assertions:t.assertions+1,score:t.score+c*e.difficulty(s)+10}}),(function(){var t=e.state,n=t.score,a=t.assertions,r=e.props,c=r.setScore,o=r.setAssertions;c(n),o(a),e.scoreLocalStorage(n)}));return e.setState({btnNextQuestion:!0,colorQuestions:!0,btnDisabled:!1}),i},e.scoreLocalStorage=function(t){var n=e.props.namePlayer,a=JSON.parse(localStorage.getItem("ranking")),r=a.find((function(e){return e.name===n}));r.score=t,a[0]=r,localStorage.setItem("ranking",JSON.stringify(a))},e.difficulty=function(e){switch(e){case"easy":return 1;case"medium":return 2;case"hard":return 3;default:return 0}},e.nextQuestion=function(){var t=e.state.counter,n=e.props.history;return t<5&&(e.intervalTimer(),e.setState((function(e){return{counter:e.counter+1}}),(function(){4===t?n.push("/feedback"):e.currentQuestion()})))},e.fetchQuestions=Object(p.a)(m.a.mark((function t(){var n,a,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=localStorage.getItem("token"),a="https://opentdb.com/api.php?amount=5&token=".concat(n),t.next=4,fetch(a);case 4:return t.next=6,t.sent.json();case 6:r=t.sent,e.validateToken(r);case 8:case"end":return t.stop()}}),t)}))),e.handleTimer=function(){e.setState({timer:30,btnDisabled:!0,btnNextQuestion:!0,enableTimer:!1})},e}return Object(v.a)(n,[{key:"componentDidMount",value:function(){this.fetchQuestions(),this.intervalTimer(),this.backgroundAudio("play")}},{key:"componentDidUpdate",value:function(){0===this.state.timer&&(clearInterval(this.timer),this.handleTimer())}},{key:"componentWillUnmount",value:function(){this.backgroundAudio("pause")}},{key:"render",value:function(){var e=this,t=-1,n=this.state,a=n.currentQuestion,c=n.answers,o=n.btnNextQuestion,s=n.colorQuestions,i=n.timer,u=n.btnDisabled,l=n.enableTimer,m=a.category,p=a.question,d=a.correct_answer;return r.a.createElement(r.a.Fragment,null,r.a.createElement(I,null),r.a.createElement("div",{className:"containerBody"},r.a.createElement("p",null,m),r.a.createElement("p",{className:"currentQuestion"},_.a.decode("".concat(p))),l?r.a.createElement("span",{className:"handleSeconds"},"".concat(i," segundos")):r.a.createElement("span",null,"Acabou o tempo!"),r.a.createElement("div",{className:"answer-options"},c.map((function(n,a){return n===d?r.a.createElement("button",{disabled:u,className:s?"btn btn-success":"btn btn-secondary",type:"button","data-testid":"correct-answer",key:a,onClick:e.verifyAnswer},_.a.decode("".concat(n))):r.a.createElement("button",{className:s?"btn btn-danger":"btn btn-secondary",type:"button",disabled:u,key:a,"data-testid":"wrong-answer-".concat(t<3&&(t+=1)),onClick:e.verifyAnswer},_.a.decode("".concat(n)))})),o&&r.a.createElement("button",{type:"button",onClick:this.nextQuestion,className:"btn btn-secondary"},"Next"))))}}]),n}(a.Component),P=Object(s.b)((function(e){return{namePlayer:e.player.name}}),(function(e){return{setScore:function(t){return e(function(e){return{type:"SET_SCORE",score:e}}(t))},setAssertions:function(t){return e(function(e){return{type:"SET_ASSERTIONS",assertions:e}}(t))}}}))(D),R=function(e){Object(g.a)(n,e);var t=Object(y.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(v.a)(n,[{key:"render",value:function(){return r.a.createElement("h1",null,"Settings")}}]),n}(a.Component),B=Object(s.b)()(R),J=(n(56),function(e){Object(g.a)(n,e);var t=Object(y.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).handleFeedback=function(){return e.props.assertions>=3},e}return Object(v.a)(n,[{key:"render",value:function(){var e=this.props,t=e.score,n=e.assertions,a=e.history;return r.a.createElement(r.a.Fragment,null,r.a.createElement(I,null),r.a.createElement("div",{className:"containerBody"},r.a.createElement("h1",null,"Feedback"),this.handleFeedback()?r.a.createElement("p",null,"Well Done!"):r.a.createElement("p",null,"Could be better..."),r.a.createElement("p",null,"Pontos: ",t," "),r.a.createElement("p",null,"Acertos: ",n),r.a.createElement("button",{className:"btn btn-primary",type:"button",onClick:function(){return a.push("/")}},"Play Again"),r.a.createElement("button",{className:"btn btn-primary",type:"button",onClick:function(){return a.push("/ranking")}},"Ranking")))}}]),n}(a.Component)),F=Object(s.b)((function(e){return{score:e.player.score,assertions:e.player.assertions}}))(J),L=(n(57),function(e){Object(g.a)(n,e);var t=Object(y.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,c=new Array(a),o=0;o<a;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={players:JSON.parse(localStorage.getItem("ranking"))||[]},e.handleRanking=function(){return e.state.players.sort((function(e,t){return t.score-e.score})).map((function(e,t){var n=e.name,a=e.score;return r.a.createElement("div",{key:t},r.a.createElement("p",null,"Nome : ",n),r.a.createElement("p",null,"Pontos: ",a),r.a.createElement("hr",null))}))},e}return Object(v.a)(n,[{key:"componentDidMount",value:function(){this.handleRanking()}},{key:"render",value:function(){var e=this.props.history;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("button",{type:"button",onClick:function(){return e.push("/")},className:"btn btn-primary"},"Home"),r.a.createElement("button",{type:"button",onClick:function(){return e.push("/feedback")},className:"btn btn-primary"},"Feedback")),r.a.createElement("div",{className:"fade"}),r.a.createElement("section",{className:"slide"},r.a.createElement("div",{className:"crawl"},r.a.createElement("div",{className:"title"},r.a.createElement("h1",null,"Ranking")),this.handleRanking())))}}]),n}(a.Component)),U=Object(s.b)()(L);n(58);function G(){return r.a.createElement(u.c,null,r.a.createElement(u.a,{exact:!0,path:"/game",component:P}),r.a.createElement(u.a,{exact:!0,path:"/settings",component:B}),r.a.createElement(u.a,{exact:!0,path:"/feedback",component:F}),r.a.createElement(u.a,{exact:!0,path:"/ranking",component:U}),r.a.createElement(u.a,{exact:!0,path:"/",component:N}))}var M=n(16),q=n(33),W=n(35),H={name:"",assertions:0,score:0,gravatarEmail:""},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PLAYER":return Object(f.a)(Object(f.a)({},e),{},{name:t.userInfo.name,gravatarEmail:t.userInfo.email});case"SET_SCORE":return Object(f.a)(Object(f.a)({},e),{},{score:t.score});case"SET_ASSERTIONS":return Object(f.a)(Object(f.a)({},e),{},{assertions:t.assertions});default:return e}},z=n(34),K=n.n(z),V=Object(M.combineReducers)({player:Y,game:K.a}),X=Object(M.legacy_createStore)(V,Object(q.composeWithDevTools)(Object(M.applyMiddleware)(W.a)));window.Cypress&&(window.store=X);var Z=X;o.a.render(r.a.createElement(s.a,{store:Z},r.a.createElement(i.a,null,r.a.createElement(G,null))),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.f1ccebc9.chunk.js.map